<!--Le loading screen-->
<ng-container *ngIf="loading$ | async">
    <div class="overlay">
        <div>
            <div class="loader"></div>
            <div class="loader"></div>
            <div class="loader"></div>
            <div class="loader"></div>
            <div class="loader"></div>
        </div>
    </div>
</ng-container>

<!--La page quand l'utilisateur est connecté-->
<div *ngIf="getUser()">
    <!--header-->
    <div class="header-wrapper">
        <!--fieldset class="tags-fieldset">
            <legend>Choose your labels :</legend>
        </fieldset-->
        <div class="button-wrapper">
            <button class="button" (click)="refreshIssues()">Refresh Data</button>
            <button *ngIf="getUser() == 'alice.durand@csgroup.eu'" class="button" (click)="refreshUsers()">Refresh Users</button>
        </div>
    </div>
    <!--table-->
    <table class="table">
        <tr>
            <th>N°</th>
            <th>Title</th>
            <th>Link</th>
            <th>Workaround</th>
            <th>Created at</th>
            <th>Closed at</th>
        </tr>
        <tr *ngFor="let issue of issues.slice().reverse()">
            <td>{{ issue.number }}</td>
            <td>{{ issue.title }}</td>
            <td><a href="{{ issue.link }}" target="_blank">See more</a></td>
            <td *ngIf="issue.workaround" class="good">Workaround</td>
            <td *ngIf="!issue.workaround" class="notgood">Need a fix</td>
            <td>{{ issue.creation }}</td>
            <td *ngIf="issue.closure" class="good">{{ issue.closure }}</td>
            <td *ngIf="!issue.closure" class="notgood">Not close</td>
        </tr>
    </table>
</div>

<!--La page quand l'utilisateur n'est pas connecté-->
<div class="text-wrapper" *ngIf="!getUser()">
    <p class="already-connected">Sorry, you're not allowed to access this page if you're not registered :</p>
    <button class="button" routerLink="/connect" routerLinkActive="actif">CONNECT</button>
</div>